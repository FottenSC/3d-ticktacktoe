import{r as u,u as g,j as e,B as j,C as y,E as w,O as b,c as S}from"./react-three-Cbw9jh9h.js";import{g as d,Q as M,a5 as v,a6 as N}from"./three-DTk07X9H.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function o(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(t){if(t.ep)return;t.ep=!0;const r=o(t);fetch(t.href,r)}})();function O({position:s,value:n,onClick:o}){const[a,t]=u.useState(!1),r=u.useRef(null);return g(i=>{r.current&&n&&(r.current.rotation.y=Math.sin(i.clock.elapsedTime)*.2)}),e.jsxs("group",{position:s,children:[e.jsx(j,{args:[.9,.1,.9],onClick:i=>{i.stopPropagation(),o()},onPointerOver:()=>t(!0),onPointerOut:()=>t(!1),receiveShadow:!0,castShadow:!0,children:e.jsx("meshStandardMaterial",{color:a?"hotpink":"orange",transparent:!0,opacity:.8})}),n&&e.jsx("group",{position:[0,.5,0],ref:r,children:n==="X"?e.jsx(P,{}):e.jsx(I,{})})]})}function P(){return e.jsxs("group",{children:[e.jsx(j,{args:[.8,.2,.2],rotation:[0,Math.PI/4,0],castShadow:!0,receiveShadow:!0,children:e.jsx("meshStandardMaterial",{color:"blue"})}),e.jsx(j,{args:[.8,.2,.2],rotation:[0,-Math.PI/4,0],castShadow:!0,receiveShadow:!0,children:e.jsx("meshStandardMaterial",{color:"blue"})})]})}function I(){return e.jsxs("mesh",{rotation:[Math.PI/2,0,0],castShadow:!0,receiveShadow:!0,children:[e.jsx("torusGeometry",{args:[.3,.1,16,32]}),e.jsx("meshStandardMaterial",{color:"red"})]})}function C({squares:s,onClick:n}){return e.jsx("group",{children:s.map((o,a)=>{const t=a%3-1,r=Math.floor(a/3)-1;return e.jsx(O,{position:[t*1.1,0,r*1.1],value:o,onClick:()=>n(a)},a)})})}function E({line:s}){const n=u.useRef(null),o=u.useMemo(()=>{const i=s[0],c=s[2],l=i%3-1,f=Math.floor(i/3)-1,p=c%3-1,h=Math.floor(c/3)-1,x=new d(l*1.1,1.2,f*1.1),m=new d(p*1.1,1.2,h*1.1);return[x,m]},[s]),{position:a,rotation:t,height:r}=u.useMemo(()=>{const i=o[0],c=o[1],l=new d().subVectors(c,i),f=l.length(),p=new d().addVectors(i,c).multiplyScalar(.5),h=new M,x=new d(0,1,0);h.setFromUnitVectors(x,l.normalize());const m=new v().setFromQuaternion(h);return{position:p,rotation:m,height:f}},[o]);return g(i=>{if(!n.current)return;const c=1;n.current.scale.y=N.lerp(n.current.scale.y,c,.1);const l=Math.sin(i.clock.elapsedTime*5)*.1+1;n.current.scale.x=l,n.current.scale.z=l}),e.jsxs("mesh",{ref:n,position:a,rotation:t,scale:[0,0,0],children:[e.jsx("cylinderGeometry",{args:[.08,.08,r+.4,32]}),e.jsx("meshStandardMaterial",{color:"#00ff00",emissive:"#00ff00",emissiveIntensity:2,toneMapped:!1,transparent:!0,opacity:.8})]})}function L(){const[s,n]=u.useState(Array(9).fill(null)),[o,a]=u.useState(!0),t=X(s),r=t?.winner,i=c=>{if(s[c]||r)return;const l=[...s];l[c]=o?"X":"O",n(l),a(!o)};return e.jsxs("div",{className:"w-full h-screen bg-gray-900 text-white relative",children:[e.jsxs("div",{className:"absolute top-4 left-4 z-10 p-4 bg-black/50 rounded-lg backdrop-blur-sm",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"3D Tic-Tac-Toe"}),e.jsx("div",{className:"text-xl mb-4",children:r?e.jsxs("span",{className:"text-green-400",children:["Winner: ",r]}):e.jsxs("span",{children:["Next Player: ",e.jsx("span",{className:o?"text-blue-400":"text-red-400",children:o?"X":"O"})]})}),e.jsx("button",{className:"px-4 py-2 bg-blue-600 rounded hover:bg-blue-500 transition-colors cursor-pointer",onClick:()=>{n(Array(9).fill(null)),a(!0)},children:"Reset Game"})]}),e.jsxs(y,{shadows:!0,camera:{position:[5,5,5],fov:50},children:[e.jsx("ambientLight",{intensity:.5}),e.jsx("directionalLight",{position:[10,10,5],intensity:1,castShadow:!0,"shadow-mapSize":[1024,1024]}),e.jsx(w,{preset:"city"}),e.jsx(b,{}),e.jsx(C,{squares:s,onClick:i}),t&&e.jsx(E,{line:t.line}),e.jsx("gridHelper",{args:[10,10]})]})]})}function X(s){const n=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(let o=0;o<n.length;o++){const[a,t,r]=n[o];if(s[a]&&s[a]===s[t]&&s[a]===s[r])return{winner:s[a],line:n[o]}}return null}function k(){return e.jsx(L,{})}S.createRoot(document.getElementById("root")).render(e.jsx(u.StrictMode,{children:e.jsx(k,{})}));
